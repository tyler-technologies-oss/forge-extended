import{r as f,i as m,x as d}from"./iframe-CwGiyriV.js";import{t as v}from"./custom-element-BhZVzxrc.js";import{n as a}from"./property-yK6Sb6yz.js";import{f as y,s as g,a as u,c as _}from"./floating-ui.dom-D-Vy2gwa.js";const b=":host{display:contents}.ai-overlay{position:relative;box-sizing:border-box;padding:0;margin:0;border:none;background:inherit;color:inherit;border-radius:inherit;overflow:visible}.ai-overlay[popover]{inset:unset}";var x=Object.defineProperty,w=Object.getOwnPropertyDescriptor,h=(t,e,s,i)=>{for(var o=i>1?void 0:i?w(e,s):e,p=t.length-1,l;p>=0;p--)(l=t[p])&&(o=(i?l(e,s,o):l(o))||o);return i&&o&&x(e,s,o),o};let r=class extends m{constructor(){super(...arguments),this.anchor=null,this.placement="bottom-start",this.flip=!0,this.shift=!1,this.open=!1,this._overlayElement=null,this._cleanupAutoUpdate=null,this._onToggle=t=>{this.open=t.newState==="open",this.dispatchEvent(new CustomEvent("forge-ai-overlay-toggle",{detail:{open:this.open,newState:t.newState,oldState:t.oldState},bubbles:!0,composed:!0}))}}disconnectedCallback(){super.disconnectedCallback(),this._cleanup()}updated(t){t.has("open")&&this._handleOpenChange(),(t.has("anchor")||t.has("placement")||t.has("flip")||t.has("shift"))&&this.open&&this._overlayElement&&this.anchor&&this._updatePosition()}_handleOpenChange(){this.open?this._showOverlay():this._hideOverlay()}async _showOverlay(){this._overlayElement||(await this.updateComplete,this._overlayElement=this.shadowRoot?.querySelector(".ai-overlay")),this._overlayElement&&(this._overlayElement.showPopover(),this.anchor&&this._updatePosition())}_hideOverlay(){this._overlayElement?.hidePopover(),this._cleanup()}_updatePosition(){if(!this.anchor||!this._overlayElement)return;this._cleanup();const t=[...this.flip?[y()]:[],...this.shift?[g({padding:8})]:[]];this._cleanupAutoUpdate=u(this.anchor,this._overlayElement,()=>this._computePosition(t))}async _computePosition(t){if(!(!this.anchor||!this._overlayElement))try{const e=await _(this.anchor,this._overlayElement,{placement:this.placement,middleware:t});Object.assign(this._overlayElement.style,{left:"0",top:"0",translate:`${this._roundByDPR(e.x)}px ${this._roundByDPR(e.y)}px`}),this.setAttribute("data-position-placement",e.placement)}catch(e){console.error("Failed to compute overlay position:",e)}}_roundByDPR(t){const e=window.devicePixelRatio||1;return Math.round(t*e)/e}_cleanup(){this._cleanupAutoUpdate?.(),this._cleanupAutoUpdate=null,this.removeAttribute("data-position-placement")}render(){return d`
      <div class="ai-overlay" popover="manual" @toggle=${this._onToggle}>
        <slot></slot>
      </div>
    `}};r.styles=f(b);h([a({type:Object})],r.prototype,"anchor",2);h([a()],r.prototype,"placement",2);h([a({type:Boolean})],r.prototype,"flip",2);h([a({type:Boolean})],r.prototype,"shift",2);h([a({type:Boolean,reflect:!0})],r.prototype,"open",2);r=h([v("forge-ai-overlay")],r);const $=`/**
 * @license
 * Copyright Tyler Technologies, Inc. 
 * License: Apache-2.0
 */:host{display:contents;overflow:visible}.ai-popover{background:var(--forge-theme-surface-bright, #ffffff);border-radius:calc(var(--forge-shape-medium, 4px) * var(--forge-shape-factor, 1));box-shadow:var(--forge-theme-surface-bright-shadow, 0px 3px 1px -2px rgba(0, 0, 0, .2), 0px 2px 2px 0px rgba(0, 0, 0, .14), 0px 1px 5px 0px rgba(0, 0, 0, .12));box-sizing:border-box;animation-duration:.15s;animation-timing-function:cubic-bezier(0,0,0,1);animation-name:fadein,scalein;transform-origin:center center}forge-ai-overlay[data-position-placement^=top]:not([data-position-placement*="-"]) .ai-popover{transform-origin:bottom center}forge-ai-overlay[data-position-placement^=top][data-position-placement$=-start] .ai-popover{transform-origin:bottom left}forge-ai-overlay[data-position-placement^=top][data-position-placement$=-end] .ai-popover{transform-origin:bottom right}forge-ai-overlay[data-position-placement^=right]:not([data-position-placement*="-"]) .ai-popover{transform-origin:left center}forge-ai-overlay[data-position-placement^=right][data-position-placement$=-start] .ai-popover{transform-origin:left top}forge-ai-overlay[data-position-placement^=right][data-position-placement$=-end] .ai-popover{transform-origin:left bottom}forge-ai-overlay[data-position-placement^=bottom]:not([data-position-placement*="-"]) .ai-popover{transform-origin:top center}forge-ai-overlay[data-position-placement^=bottom][data-position-placement$=-start] .ai-popover{transform-origin:top left}forge-ai-overlay[data-position-placement^=bottom][data-position-placement$=-end] .ai-popover{transform-origin:top right}forge-ai-overlay[data-position-placement^=left]:not([data-position-placement*="-"]) .ai-popover{transform-origin:right center}forge-ai-overlay[data-position-placement^=left][data-position-placement$=-start] .ai-popover{transform-origin:right top}forge-ai-overlay[data-position-placement^=left][data-position-placement$=-end] .ai-popover{transform-origin:right bottom}@keyframes fadein{0%{opacity:0}to{opacity:1}}@keyframes scalein{0%{transform:scale(.8)}to{transform:scale(1)}}`;var O=Object.defineProperty,P=Object.getOwnPropertyDescriptor,c=(t,e,s,i)=>{for(var o=i>1?void 0:i?P(e,s):e,p=t.length-1,l;p>=0;p--)(l=t[p])&&(o=(i?l(e,s,o):l(o))||o);return i&&o&&O(e,s,o),o};let n=class extends m{constructor(){super(...arguments),this.anchor=null,this.placement="bottom-start",this.flip=!0,this.shift=!1,this.open=!1,this._onOverlayToggle=t=>{this.open=t.detail.open,this.dispatchEvent(new CustomEvent("ai-popover-toggle",{detail:t.detail,bubbles:!0,composed:!0}))}}render(){return d`
      <forge-ai-overlay
        .anchor=${this.anchor}
        .placement=${this.placement}
        .flip=${this.flip}
        .shift=${this.shift}
        .open=${this.open}
        @ai-overlay-toggle=${this._onOverlayToggle}>
        <div class="ai-popover">
          <slot></slot>
        </div>
      </forge-ai-overlay>
    `}};n.styles=f($);c([a({type:Object})],n.prototype,"anchor",2);c([a()],n.prototype,"placement",2);c([a({type:Boolean})],n.prototype,"flip",2);c([a({type:Boolean})],n.prototype,"shift",2);c([a({type:Boolean,reflect:!0})],n.prototype,"open",2);n=c([v("forge-ai-popover")],n);
