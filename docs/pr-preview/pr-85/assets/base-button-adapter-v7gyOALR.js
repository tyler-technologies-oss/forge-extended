import{B as g,_ as l,h,f as E,g as r}from"./base-adapter-BQVL-wrc.js";import{c as p}from"./iframe-C3fo8bEJ.js";import{D as u,z as m,A as v,I as L,B as b,w as c,E as f,F as S}from"./icon-registry-CfgxRLEi.js";import{W as y,a as T,c as k,b as O}from"./with-default-aria-ja3Q3ydq.js";import{a as I}from"./utils-Bn45QkHx.js";/**
 * @license
 * Copyright Tyler Technologies, Inc. 
 * License: Apache-2.0
 */const P=["name","value","formaction","formenctype","formmethod","formnovalidate","formtarget"];function C(i,t,o){o.forEach(e=>{const n=i.getAttribute(e);n!==null&&t.setAttribute(e,n)})}/**
 * @license
 * Copyright Tyler Technologies, Inc. 
 * License: Apache-2.0
 */const A={TYPE:"type",DISABLED:"disabled",POPOVER_ICON:"popover-icon",DENSE:"dense",TABINDEX:"tabindex"},D={...A},B={POPOVER_ICON:"forge-button__popover-icon",WITH_ANCHOR:"with-anchor"},N={ROOT:"[part=root]",DEFAULT_SLOT:"slot:not([name])",END_SLOT:"slot[name=end]"},s={observedAttributes:A,attributes:D,selectors:N,classes:B};/**
 * @license
 * Copyright Tyler Technologies, Inc. 
 * License: Apache-2.0
 */function w(i){class t extends i{connectedCallback(){super.connectedCallback?.(),this.hasAttribute(u)&&this[m]&&this[m][v](this),this.removeAttribute(u),delete this[m]}}return t}/**
 * @license
 * Copyright Tyler Technologies, Inc. 
 * License: Apache-2.0
 */class a extends y(T(w(g))){static get observedAttributes(){return Object.values(s.observedAttributes)}constructor(){super(),this.popoverTargetElement=null,this.popoverTargetAction="click",L.define(b)}connectedCallback(){super.connectedCallback(),this._core.initialize()}attributeChangedCallback(t,o,e){switch(t){case s.observedAttributes.TYPE:this.type=e;return;case s.observedAttributes.DISABLED:this.disabled=p(e);return;case s.observedAttributes.POPOVER_ICON:this.popoverIcon=p(e);return;case s.observedAttributes.DENSE:this.dense=p(e);return}}labelClickedCallback(){this._core.click({animateStateLayer:!0})}labelChangedCallback(t){this[c]({ariaLabel:t},{setAttribute:!this.hasAttribute("aria-label")})}get form(){return this[f].form}get name(){return this.getAttribute("name")??""}set name(t){this.setAttribute("name",t)}get value(){return this.getAttribute("value")??""}set value(t){this.setAttribute("value",t)}click(){this._core.click({animateStateLayer:!0})}focus(t){this._core.focus(t)}}a.formAssociated=!0;l([h()],a.prototype,"type",void 0);l([h()],a.prototype,"disabled",void 0);l([h()],a.prototype,"popoverIcon",void 0);l([h()],a.prototype,"dense",void 0);/**
 * @license
 * Copyright Tyler Technologies, Inc. 
 * License: Apache-2.0
 */class W{constructor(t){this._adapter=t,this._type="button",this._disabled=!1,this._popoverIcon=!1,this._dense=!1,this._clickListener=this._onClick.bind(this),this._keydownListener=this._onKeydown.bind(this),this._slotChangeListener=()=>this._detectSlottedAnchor()}initialize(){this._detectSlottedAnchor(),this._adapter.addDefaultSlotChangeListener(this._slotChangeListener)}click({animateStateLayer:t=!1}={}){this._disabled||(this._adapter.clickHost(),t&&this._adapter.animateStateLayer())}focus(t){this._adapter.focusHost(t),t?.focusVisible!==!1&&this._adapter.forceFocusVisible()}async _onClick(t){const o=this._type==="submit"||this._type==="reset";!o&&this._adapter.hasPopoverTarget()&&this._adapter.managePopover()||(await new Promise(e=>setTimeout(e)),!(t.defaultPrevented||this._disabled)&&o&&this._adapter.clickFormButton(this._type))}async _onKeydown(t){if(t.key===" "){t.preventDefault(),this.click();return}await I(),!(t.defaultPrevented||this._disabled)&&t.key==="Enter"&&this.click()}_detectSlottedAnchor(){this._adapter.hasSlottedAnchor?(this.disabled=!1,this._adapter.removeHostListener("click",this._clickListener),this._adapter.removeHostListener("keydown",this._keydownListener)):(this._adapter.addHostListener("click",this._clickListener),this._adapter.addHostListener("keydown",this._keydownListener)),this._adapter.initialize()}get type(){return this._type}set type(t){this._type!==t&&(this._type=t,this._adapter.setHostAttribute(s.attributes.TYPE,t))}get disabled(){return this._disabled}set disabled(t){t=!!t,this._disabled!==t&&(this._adapter.hasSlottedAnchor&&(t=!1),this._disabled=t,this._adapter.setDisabled(this._disabled),this._adapter.toggleHostAttribute(s.attributes.DISABLED,t))}get popoverIcon(){return this._popoverIcon}set popoverIcon(t){t=!!t,this._popoverIcon!==t&&(this._popoverIcon=t,this._adapter.toggleDefaultPopoverIcon(this._popoverIcon),this._adapter.toggleHostAttribute(s.attributes.POPOVER_ICON,t))}get dense(){return this._dense}set dense(t){t=!!t,this._dense!==t&&(this._dense=t,this._adapter.toggleHostAttribute(s.attributes.DENSE,t))}}/**
 * @license
 * Copyright Tyler Technologies, Inc. 
 * License: Apache-2.0
 */class U extends E{constructor(t){super(t),this._rootElement=r(this._component,s.selectors.ROOT),this._focusIndicatorElement=r(this._component,k.elementName),this._stateLayerElement=r(this._component,O.elementName),this._defaultSlotElement=r(this._component,s.selectors.DEFAULT_SLOT),this._endSlotElement=r(this._component,s.selectors.END_SLOT)}get hasSlottedAnchor(){return!!this.getSlottedAnchor}get getSlottedAnchor(){return this._defaultSlotElement.assignedElements({flatten:!0}).find(t=>t.tagName==="A")}initialize(){const t=this.getSlottedAnchor;this._component[c]({role:t?null:"button"},{setAttribute:!this._component.hasAttribute("role")||!!t}),this._rootElement.classList.toggle(s.classes.WITH_ANCHOR,!!t),t?this._component.removeAttribute("tabindex"):!this._component.disabled&&!this._component.hasAttribute("tabindex")&&this._component.setAttribute("tabindex","0"),this._focusIndicatorElement.targetElement=t||this._component,this._stateLayerElement.targetElement=t||this._component}setDisabled(t){t?(this._focusIndicatorElement.remove(),this._stateLayerElement.remove()):this._rootElement.append(this._focusIndicatorElement,this._stateLayerElement),this.hasSlottedAnchor?(this._component.removeAttribute("tabindex"),this._component[c]({ariaDisabled:null},{setAttribute:!0})):(t?this._component.removeAttribute("tabindex"):this._component.hasAttribute("tabindex")||this._component.setAttribute("tabindex","0"),this._component[c]({ariaDisabled:t?"true":null}))}clickHost(){HTMLElement.prototype.click.call(this._component)}forceFocusVisible(){this._focusIndicatorElement.active=!0}clickFormButton(t){if(this._component.form)if(t==="submit"){this._component[f].setFormValue(this._component.value);const o=document.createElement("button");o.type=t,C(this._component,o,P),this._component.form.addEventListener("submit",e=>{Object.defineProperty(e,"submitter",{configurable:!0,enumerable:!0,get:()=>this._component})},{capture:!0,once:!0}),this._component.insertAdjacentElement("afterend",o),o.click(),o.remove()}else t==="reset"&&this._component.form?.reset()}hasPopoverTarget(){return this._component.hasAttribute("popovertarget")||!!this._component.popoverTargetElement}managePopover(){if(this._component.form||!this.hasPopoverTarget()||!S())return!1;const t=this._locatePopoverTargetElement();if(!t)return!1;const o=this._component.getAttribute("popovertargetaction")??this._component.popoverTargetAction??"toggle",e=t.matches(":popover-open");switch(o){case"show":return e||t.showPopover(),!0;case"hide":return e&&t.hidePopover(),!1;case"toggle":default:const n=t.togglePopover();if(n&&t.popover!=="manual"){const _=d=>{d.stopPropagation(),t.matches(":popover-open")&&t.hidePopover()};this._component.addEventListener("click",_,{capture:!0,once:!0}),t.addEventListener("beforetoggle",async()=>{await new Promise(d=>setTimeout(d)),this._component.removeEventListener("click",_,{capture:!0})},{once:!0})}return n}}toggleDefaultPopoverIcon(t){if(t){if(!this._endSlotElement.querySelector("forge-icon")){const e=document.createElement("forge-icon");e.classList.add(s.classes.POPOVER_ICON),e.name=b.name,this._endSlotElement.append(e)}}else this._endSlotElement.querySelector("forge-icon")?.remove()}animateStateLayer(){this._stateLayerElement.disabled||!this._stateLayerElement.isConnected||this._stateLayerElement?.playAnimation()}addDefaultSlotChangeListener(t){this._defaultSlotElement.addEventListener("slotchange",t)}_locatePopoverTargetElement(){let t=this._component.popoverTargetElement??null;if(!t){const o=this._component.ownerDocument.getRootNode();if(!o)return null;const e=this._component.getAttribute("popovertarget");t=o.querySelector(`#${e}`)}return t}}export{U as B,w as W,W as a,a as b,s as c};
