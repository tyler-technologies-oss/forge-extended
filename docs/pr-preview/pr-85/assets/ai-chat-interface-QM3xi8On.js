import{r as B,i as E,x as n,E as T}from"./iframe-CwGiyriV.js";import{t as H}from"./custom-element-BhZVzxrc.js";import{n as d}from"./property-yK6Sb6yz.js";import{r as L}from"./state-bunXPNRp.js";import{n as I}from"./query-assigned-nodes-cwDSNLIu.js";import{n as R}from"./when-3fO0zp9C.js";import"./ai-chat-header-DUZlKiwK.js";import"./ai-empty-state-Bto1Pxh4.js";import"./ai-gradient-container-jskFjZnn.js";const q=`/**
 * @license
 * Copyright Tyler Technologies, Inc. 
 * License: Apache-2.0
 */:host{display:block;height:100%;flex-grow:1}.ai-chat-interface{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--forge-typography-body1-font-family, var(--forge-typography-font-family, "Roboto", sans-serif));font-size:var(--forge-typography-body1-font-size, calc(var(--forge-typography-font-size, 1rem) * var(--forge-typography-body-font-size-scale, .875)));font-weight:var(--forge-typography-body1-font-weight, 400);line-height:var(--forge-typography-body1-line-height, calc(var(--forge-typography-font-size, 1rem) * var(--forge-typography-body-line-height-scale, 1.125)));letter-spacing:var(--forge-typography-body1-letter-spacing, .0357142857em);text-transform:var(--forge-typography-body1-text-transform, inherit);text-decoration:var(--forge-typography-body1-text-decoration, inherit);color:var(--forge-theme-on-surface, #000000);display:flex;flex-direction:column;height:100%}.messages-container{padding-inline-start:var(--forge-spacing-medium, 16px);padding-block-end:var(--forge-spacing-medium, 16px);scrollbar-gutter:stable;overflow-y:auto;scroll-behavior:smooth;background:linear-gradient(to top,var(--forge-theme-primary-container-minimum, #f7f8fc),var(--forge-theme-surface, #ffffff));border-block-end:1px solid var(--forge-theme-outline, #e0e0e0);display:flex;flex-direction:column;flex-grow:1;gap:var(--forge-spacing-medium, 16px)}.messages-container::-webkit-scrollbar{height:var(--forge-scrollbar-height, 16px);width:var(--forge-scrollbar-width, 16px)}.messages-container::-webkit-scrollbar-track{background-color:var(--forge-scrollbar-track-container, var(--forge-theme-surface-container-low, #ebebeb))}.messages-container::-webkit-scrollbar-track:hover{background-color:var(--forge-scrollbar-track-container-hover, var(--forge-theme-surface-container-low, #ebebeb))}.messages-container::-webkit-scrollbar-corner{background-color:var(--forge-scrollbar-track-container, var(--forge-theme-surface-container-low, #ebebeb))}.messages-container::-webkit-scrollbar-thumb{height:var(--forge-scrollbar-thumb-min-height, 32px);width:var(--forge-scrollbar-thumb-min-width, 32px);border-radius:var(--forge-scrollbar-border-radius, calc(var(--forge-shape-full, 9999px) * var(--forge-shape-factor, 1)));border-width:var(--forge-scrollbar-border-width, 3px);border-style:solid;border-color:transparent;background-color:var(--forge-scrollbar-thumb-container, var(--forge-theme-surface-container-medium, #c2c2c2));background-clip:content-box}.messages-container::-webkit-scrollbar-thumb:hover{background-color:var(--forge-scrollbar-thumb-container-hover, var(--forge-theme-surface-container-high, #9e9e9e))}@media not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){.messages-container{overflow-y:scroll}}}.suggestions-container{padding-inline:var(--forge-spacing-medium, 16px);padding-block-start:var(--forge-spacing-medium, 16px)}.prompt-container{padding:var(--forge-spacing-medium, 16px)}`;var U=Object.defineProperty,W=Object.getOwnPropertyDescriptor,y=e=>{throw TypeError(e)},h=(e,t,r,s)=>{for(var c=s>1?void 0:s?W(t,r):t,m=e.length-1,u;m>=0;m--)(u=e[m])&&(c=(s?u(t,r,c):u(c))||c);return s&&c&&U(t,r,c),c},_=(e,t,r)=>t.has(e)||y("Cannot "+r),l=(e,t,r)=>(_(e,t,"read from private field"),r?r.call(e):t.get(e)),g=(e,t,r)=>t.has(e)?y("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),a=(e,t,r)=>(_(e,t,"access private method"),r),o,w,f,x,v,k,b,S,p,z,O,M,$,C,A;const N="forge-ai-chat-interface";let i=class extends E{constructor(){super(...arguments),g(this,o),this.showExpandButton=!1,this.showMinimizeButton=!1,this.expanded=!1,this.minimizeIcon="default",this._hasMessages=!1,this._resizeObserver=null,this._mutationObserver=null,this._userHasScrolledUp=!1,this._isScrollEventListenerAdded=!1,g(this,f,n`<slot name="suggestions" @slotchange=${a(this,o,p)}></slot>`),g(this,v,n`<slot name="prompt" @slotchange=${a(this,o,p)}></slot>`),g(this,b,n`<slot @slotchange=${a(this,o,p)}></slot>`)}scrollMessagesToBottom(){const e=this.shadowRoot?.querySelector(".messages-container");if(!e)return;const t=e.scrollHeight>e.clientHeight;if(!t){e.scrollTop=e.scrollHeight;return}t&&!this._isScrollEventListenerAdded&&a(this,o,C).call(this,e),e.scrollTop+e.clientHeight>=e.scrollHeight-5&&(this._userHasScrolledUp=!1),this._userHasScrolledUp||(e.scrollTop=e.scrollHeight)}firstUpdated(){a(this,o,z).call(this),a(this,o,M).call(this)}disconnectedCallback(){super.disconnectedCallback(),a(this,o,O).call(this),a(this,o,$).call(this),a(this,o,A).call(this)}render(){return n`
      <div class="ai-chat-interface">
        ${l(this,o,w)} ${l(this,o,S)} ${l(this,o,x)}
        <div class="prompt-container">${l(this,o,k)}</div>
      </div>
    `}};o=new WeakSet;w=function(){return n`
      <forge-ai-chat-header
        ?show-expand-button=${this.showExpandButton}
        ?show-minimize-button=${this.showMinimizeButton}
        ?expanded=${this.expanded}
        minimize-icon=${this.minimizeIcon}>
      </forge-ai-chat-header>
    `};f=new WeakMap;x=function(){const e=this._slottedSuggestionsNodes.length>0;return R(e,()=>n`<div class="suggestions-container">${l(this,f)}</div>`,()=>l(this,f))};v=new WeakMap;k=function(){return l(this,v)};b=new WeakMap;S=function(){return n`
      <div class="messages-container">
        ${l(this,b)} ${this._hasMessages?T:n`<forge-ai-empty-state></forge-ai-empty-state>`}
      </div>
    `};p=function(e){const t=e.target.name||"default";if(t==="default"){const s=e.target.assignedElements();this._hasMessages=s.length>0}["suggestions","prompt","default"].includes(t)&&this.requestUpdate()};z=function(){const e=this.shadowRoot?.querySelector(".messages-container");e&&(this._resizeObserver=new ResizeObserver(()=>{requestAnimationFrame(()=>{this.scrollMessagesToBottom()})}),this._resizeObserver.observe(e))};O=function(){this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)};M=function(){this._mutationObserver=new MutationObserver(()=>{requestAnimationFrame(()=>{this.scrollMessagesToBottom()})}),this._mutationObserver.observe(this,{childList:!0,subtree:!0,attributes:!1,characterData:!0})};$=function(){this._mutationObserver&&(this._mutationObserver.disconnect(),this._mutationObserver=null)};C=function(e){let t=e.scrollTop;const r=()=>{const s=e.scrollTop;s<t&&(this._userHasScrolledUp=!0),t=s};e.addEventListener("scroll",r,{passive:!0}),this._isScrollEventListenerAdded=!0};A=function(){const e=this.shadowRoot?.querySelector(".messages-container");e&&this._isScrollEventListenerAdded&&(e.replaceWith(e.cloneNode(!0)),this._isScrollEventListenerAdded=!1)};i.styles=B(q);h([d({type:Boolean,attribute:"show-expand-button"})],i.prototype,"showExpandButton",2);h([d({type:Boolean,attribute:"show-minimize-button"})],i.prototype,"showMinimizeButton",2);h([d({type:Boolean})],i.prototype,"expanded",2);h([d({attribute:"minimize-icon"})],i.prototype,"minimizeIcon",2);h([I({slot:"suggestions",flatten:!0})],i.prototype,"_slottedSuggestionsNodes",2);h([L()],i.prototype,"_hasMessages",2);i=h([H(N)],i);
