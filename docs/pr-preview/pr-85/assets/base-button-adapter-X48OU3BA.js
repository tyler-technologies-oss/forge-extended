import{f as E,B as T,e as S,_ as a,h as c,c as C,g as d}from"./base-adapter-BcfXthUc.js";import{c as _}from"./iframe-BSSn60lo.js";import{z as i,I as l,D as y,A as f,B as k,E as L,v as u,F as I,G as O}from"./icon-registry-Cnqmm39J.js";import{W as N,a as B,c as P,b as R}from"./with-default-aria-CyPWr3-8.js";import{a as D}from"./utils-DDUGSWJu.js";/**
 * @license
 * Copyright Tyler Technologies, Inc. 
 * License: Apache-2.0
 */const z=["name","value","formaction","formenctype","formmethod","formnovalidate","formtarget"];function H(o,t,s){s.forEach(e=>{const r=o.getAttribute(e);r!==null&&t.setAttribute(e,r)})}/**
 * @license
 * Copyright Tyler Technologies, Inc. 
 * License: Apache-2.0
 */function U(o,t){const s=document.createElement("div");s.innerHTML=o;for(let r=s.childNodes.length-1;r>=0;r--)s.childNodes[r].nodeName.toLowerCase()!=="svg"&&s.removeChild(s.childNodes[r]);const e=s.firstElementChild;return e?.nodeName.toLowerCase()==="svg"&&x(e)?(t&&e.setAttribute("viewBox",t),!e.hasAttribute("viewBox")&&t&&e.setAttribute("viewBox",t),e.removeAttribute("height"),e.removeAttribute("width"),e):null}function x(o){if(o.nodeType!==1)return!0;if(o.nodeName.toLowerCase()==="script"||o.querySelector("script"))return!1;const t=Array.from(o.attributes);for(const e of t)if(typeof e.name=="string"&&e.name.toLowerCase().startsWith("on"))return!1;const s=Array.from(o.childNodes);for(const e of s)if(!x(e))return!1;return!0}/**
 * @license
 * Copyright Tyler Technologies, Inc. 
 * License: Apache-2.0
 */class F extends E{constructor(t){super(t)}canLazyLoad(){return!!window.IntersectionObserver}observeVisibility(t){this._observer=new IntersectionObserver(s=>{s.some(e=>e.isIntersecting)&&(this.destroyVisibilityObserver(),t())},{rootMargin:`${i.numbers.LAZY_ROOT_MARGIN}px`}),this._observer.observe(this._component)}destroyVisibilityObserver(){this._observer&&(this._observer.disconnect(),this._observer=void 0)}setContent(t){const s=this._component.shadowRoot;s.querySelectorAll(":not(style)").forEach(e=>e.remove()),t&&(this._component.viewbox&&t.setAttribute("viewBox",this._component.viewbox),t.setAttribute("aria-hidden","true"),s.appendChild(t))}setViewBox(t){this._component.shadowRoot?.querySelector("svg")?.setAttribute("viewBox",t)}}/**
 * @license
 * Copyright Tyler Technologies, Inc. 
 * License: Apache-2.0
 */const b=new Map;function g(o,t,s=!0){if(!o||!o.includes("svg"))return null;!t&&!o.includes("viewBox")&&(t=`0 0 ${i.numbers.DEFAULT_WIDTH} ${i.numbers.DEFAULT_HEIGHT}`);const e=U(o,t);return s&&e&&e.setAttribute("part","svg"),e}function W(o){return l.get(o)}function $(o,t){l.awaitIcon(o,t)}function q(o,t){l.removeListener(o,t)}function M(o,t){let s=b.get(o);if(!s)if(typeof fetch<"u"&&typeof document<"u")s=fetch(o).then(async e=>{if(e.ok){const r=await e.text()||"";return l.define({name:t,data:r}),b.delete(o),r}return l.define({name:t,data:""}),""}),b.set(o,s);else return l.define({name:t,data:""}),Promise.resolve("");return s||Promise.resolve("")}function A(o){return["standard","extended","custom","all"].includes(o)?o:"all"}/**
 * @license
 * Copyright Tyler Technologies, Inc. 
 * License: Apache-2.0
 */class Y{constructor(t){this._adapter=t,this._lazy=!1,this._external=!1,this._externalType="all",this._lazyListener=this._loadIcon.bind(this)}initialize(){this._applyIcon()}destroy(){this._adapter.destroyVisibilityObserver(),this._clearIconQueue(),this._tryRemoveListener()}_safeApplyIcon(){this._adapter.isConnected&&(this._clearIconQueue(),this._queueIconUpdate())}_tryRemoveListener(){this._registrationListener&&this._name&&q(this._name,this._registrationListener)}_applyIcon(){this._lazy&&this._adapter.canLazyLoad()?this._adapter.observeVisibility(this._lazyListener):this._loadIcon()}_clearIconQueue(){this._applyTimer&&(clearTimeout(this._applyTimer),this._applyTimer=void 0)}_queueIconUpdate(){this._applyTimer=window.setTimeout(()=>{this._applyTimer=void 0,this._applyIcon()})}async _loadIcon(){try{if(this._src){const t=g(this._src,this._viewbox);this._setIconContent(t)}else if(this._name){const t=this._tryGetIcon(this._name);if(t?.node){this._setIconContent(t.node);return}let s=null;if(t)t.raw&&(s=g(t.raw,this._viewbox));else{if(!this._external){this._registrationListener=()=>this._applyIcon(),$(this._name,this._registrationListener),this._adapter.setContent(null);return}this._externalType||(this._externalType="standard");const e=this._getExternalUrl(this._name,this._externalType);if(e){const r=await M(e,this._name);r&&(s=g(r,this._viewbox))}}s&&(t?.node||l.setNode(this._name,s),this._setIconContent(s))}else this._adapter.setContent(null)}catch(t){throw this._adapter.setContent(null),t}}_setIconContent(t){const s=t?t.cloneNode(!0):null;s&&this._adapter.setContent(s)}_tryGetIcon(t){return W(t)}_getExternalUrl(t,s){if(typeof this._externalUrlBuilder=="function")return this._externalUrlBuilder(t,s);const e=A(this._externalType);return["standard","extended","custom"].includes(e)?`${i.strings.DEFAULT_NETWORK_BASE_URL}/${e}/${t}.svg`:`${i.strings.ALL_NETWORK_BASE_URL}/${t}.svg`}get name(){return this._name}set name(t){this._name!==t&&(this._registrationListener&&this._tryRemoveListener(),this._name=(t||"").replace(/\s+/,""),this._safeApplyIcon(),this._adapter.toggleHostAttribute(i.attributes.NAME,!!this._name,this._name))}get src(){return this._src}set src(t){this._src!==t&&(this._src=t,this._adapter.isConnected&&this._applyIcon(),this._adapter.toggleHostAttribute(i.attributes.SRC,!!this._src,this._src))}get lazy(){return this._lazy}set lazy(t){this._lazy!==t&&(this._lazy=t,this._safeApplyIcon(),this._adapter.toggleHostAttribute(i.attributes.LAZY,this._lazy))}get external(){return this._external}set external(t){this._external!==t&&(this._external=t,this._safeApplyIcon(),this._adapter.toggleHostAttribute(i.attributes.EXTERNAL,this._external))}get externalType(){return this._externalType}set externalType(t){t=A(t),this._externalType!==t&&(this._externalType=t,this._safeApplyIcon(),this._adapter.setHostAttribute(i.attributes.EXTERNAL_TYPE,`${this._externalType}`))}get externalUrlBuilder(){return this._externalUrlBuilder}set externalUrlBuilder(t){this._externalUrlBuilder!==t&&(this._externalUrlBuilder=t,this._safeApplyIcon())}get viewbox(){return this._viewbox}set viewbox(t){this._viewbox!==t&&(this._viewbox=t,this._adapter.setViewBox(this._viewbox),this._adapter.setHostAttribute(i.attributes.VIEWBOX,`${this.viewbox}`))}get theme(){return this._theme}set theme(t){this._theme!==t&&(this._theme=t,this._adapter.setHostAttribute(i.attributes.THEME,this._theme))}layout(){this._adapter.isConnected&&this._applyIcon()}}/**
 * @license
 * Copyright Tyler Technologies, Inc. 
 * License: Apache-2.0
 */const V="<template></template>",X=":host{--_icon-color:var(--forge-icon-color, currentColor);--_icon-size:var(--forge-icon-size, 1em);--_icon-width:var(--forge-icon-width, var(--_icon-size));--_icon-height:var(--forge-icon-height, var(--_icon-size));--_icon-font-size:var(--forge-icon-font-size, calc(var(--forge-typography-font-size, 1rem) * 1.5))}:host{display:inline-block;box-sizing:content-box;contain:content;font-size:var(--_icon-font-size)}:host([hidden]){display:none}svg{width:var(--_icon-width);height:var(--_icon-height);display:block;fill:var(--_icon-color);stroke:var(--_icon-color);stroke-width:0}:host([theme=primary]){--_icon-color:var(--forge-icon-color, var(--forge-theme-primary, #3f51b5))}:host([theme=secondary]){--_icon-color:var(--forge-icon-color, var(--forge-theme-secondary, #ffc107))}:host([theme=tertiary]){--_icon-color:var(--forge-icon-color, var(--forge-theme-tertiary, #3d5afe))}:host([theme=success]){--_icon-color:var(--forge-icon-color, var(--forge-theme-success, #2e7d32))}:host([theme=error]){--_icon-color:var(--forge-icon-color, var(--forge-theme-error, #b00020))}:host([theme=warning]){--_icon-color:var(--forge-icon-color, var(--forge-theme-warning, #d14900))}:host([theme=text-medium]){--_icon-color:var(--forge-icon-color, var(--forge-theme-text-medium, rgba(0, 0, 0, 0.6)))}:host([theme=text-low]){--_icon-color:var(--forge-icon-color, var(--forge-theme-text-low, rgba(0, 0, 0, 0.38)))}";let h=class extends T{static get observedAttributes(){return Object.values(i.observedAttributes)}constructor(){super(),S(this,V,X),this._core=new Y(new F(this))}connectedCallback(){this._core.initialize()}disconnectedCallback(){this._core.destroy()}attributeChangedCallback(t,s,e){switch(t){case i.observedAttributes.NAME:this.name=e;break;case i.observedAttributes.SRC:this.src=e;break;case i.observedAttributes.LAZY:this.lazy=_(e);break;case i.observedAttributes.EXTERNAL:this.external=_(e);break;case i.observedAttributes.EXTERNAL_TYPE:this.externalType=e;break;case i.observedAttributes.VIEWBOX:this.viewbox=e;break;case i.observedAttributes.THEME:this.theme=e;break}}layout(){this._core.layout()}};a([c()],h.prototype,"name",void 0);a([c()],h.prototype,"src",void 0);a([c()],h.prototype,"lazy",void 0);a([c()],h.prototype,"external",void 0);a([c()],h.prototype,"externalType",void 0);a([c()],h.prototype,"externalUrlBuilder",void 0);a([c()],h.prototype,"viewbox",void 0);a([c()],h.prototype,"theme",void 0);h=a([C({name:i.elementName})],h);/**
 * @license
 * Copyright Tyler Technologies, Inc. 
 * License: Apache-2.0
 */const w={TYPE:"type",DISABLED:"disabled",POPOVER_ICON:"popover-icon",DENSE:"dense",TABINDEX:"tabindex"},G={...w},j={POPOVER_ICON:"forge-button__popover-icon",WITH_ANCHOR:"with-anchor"},K={ROOT:"[part=root]",DEFAULT_SLOT:"slot:not([name])",END_SLOT:"slot[name=end]"},n={observedAttributes:w,attributes:G,selectors:K,classes:j};/**
 * @license
 * Copyright Tyler Technologies, Inc. 
 * License: Apache-2.0
 */function Q(o){class t extends o{connectedCallback(){super.connectedCallback?.(),this.hasAttribute(y)&&this[f]&&this[f][k](this),this.removeAttribute(y),delete this[f]}}return t}/**
 * @license
 * Copyright Tyler Technologies, Inc. 
 * License: Apache-2.0
 */class p extends N(B(Q(T))){static get observedAttributes(){return Object.values(n.observedAttributes)}constructor(){super(),this.popoverTargetElement=null,this.popoverTargetAction="click",l.define(L)}connectedCallback(){super.connectedCallback(),this._core.initialize()}attributeChangedCallback(t,s,e){switch(t){case n.observedAttributes.TYPE:this.type=e;return;case n.observedAttributes.DISABLED:this.disabled=_(e);return;case n.observedAttributes.POPOVER_ICON:this.popoverIcon=_(e);return;case n.observedAttributes.DENSE:this.dense=_(e);return}}labelClickedCallback(){this._core.click({animateStateLayer:!0})}labelChangedCallback(t){this[u]({ariaLabel:t},{setAttribute:!this.hasAttribute("aria-label")})}get form(){return this[I].form}get name(){return this.getAttribute("name")??""}set name(t){this.setAttribute("name",t)}get value(){return this.getAttribute("value")??""}set value(t){this.setAttribute("value",t)}click(){this._core.click({animateStateLayer:!0})}focus(t){this._core.focus(t)}}p.formAssociated=!0;a([c()],p.prototype,"type",void 0);a([c()],p.prototype,"disabled",void 0);a([c()],p.prototype,"popoverIcon",void 0);a([c()],p.prototype,"dense",void 0);/**
 * @license
 * Copyright Tyler Technologies, Inc. 
 * License: Apache-2.0
 */class it{constructor(t){this._adapter=t,this._type="button",this._disabled=!1,this._popoverIcon=!1,this._dense=!1,this._clickListener=this._onClick.bind(this),this._keydownListener=this._onKeydown.bind(this),this._slotChangeListener=()=>this._detectSlottedAnchor()}initialize(){this._detectSlottedAnchor(),this._adapter.addDefaultSlotChangeListener(this._slotChangeListener)}click({animateStateLayer:t=!1}={}){this._disabled||(this._adapter.clickHost(),t&&this._adapter.animateStateLayer())}focus(t){this._adapter.focusHost(t),t?.focusVisible!==!1&&this._adapter.forceFocusVisible()}async _onClick(t){const s=this._type==="submit"||this._type==="reset";!s&&this._adapter.hasPopoverTarget()&&this._adapter.managePopover()||(await new Promise(e=>setTimeout(e)),!(t.defaultPrevented||this._disabled)&&s&&this._adapter.clickFormButton(this._type))}async _onKeydown(t){if(t.key===" "){t.preventDefault(),this.click();return}await D(),!(t.defaultPrevented||this._disabled)&&t.key==="Enter"&&this.click()}_detectSlottedAnchor(){this._adapter.hasSlottedAnchor?(this.disabled=!1,this._adapter.removeHostListener("click",this._clickListener),this._adapter.removeHostListener("keydown",this._keydownListener)):(this._adapter.addHostListener("click",this._clickListener),this._adapter.addHostListener("keydown",this._keydownListener)),this._adapter.initialize()}get type(){return this._type}set type(t){this._type!==t&&(this._type=t,this._adapter.setHostAttribute(n.attributes.TYPE,t))}get disabled(){return this._disabled}set disabled(t){t=!!t,this._disabled!==t&&(this._adapter.hasSlottedAnchor&&(t=!1),this._disabled=t,this._adapter.setDisabled(this._disabled),this._adapter.toggleHostAttribute(n.attributes.DISABLED,t))}get popoverIcon(){return this._popoverIcon}set popoverIcon(t){t=!!t,this._popoverIcon!==t&&(this._popoverIcon=t,this._adapter.toggleDefaultPopoverIcon(this._popoverIcon),this._adapter.toggleHostAttribute(n.attributes.POPOVER_ICON,t))}get dense(){return this._dense}set dense(t){t=!!t,this._dense!==t&&(this._dense=t,this._adapter.toggleHostAttribute(n.attributes.DENSE,t))}}/**
 * @license
 * Copyright Tyler Technologies, Inc. 
 * License: Apache-2.0
 */class rt extends E{constructor(t){super(t),this._rootElement=d(this._component,n.selectors.ROOT),this._focusIndicatorElement=d(this._component,P.elementName),this._stateLayerElement=d(this._component,R.elementName),this._defaultSlotElement=d(this._component,n.selectors.DEFAULT_SLOT),this._endSlotElement=d(this._component,n.selectors.END_SLOT)}get hasSlottedAnchor(){return!!this.getSlottedAnchor}get getSlottedAnchor(){return this._defaultSlotElement.assignedElements({flatten:!0}).find(t=>t.tagName==="A")}initialize(){const t=this.getSlottedAnchor;this._component[u]({role:t?null:"button"},{setAttribute:!this._component.hasAttribute("role")||!!t}),this._rootElement.classList.toggle(n.classes.WITH_ANCHOR,!!t),t?this._component.removeAttribute("tabindex"):!this._component.disabled&&!this._component.hasAttribute("tabindex")&&this._component.setAttribute("tabindex","0"),this._focusIndicatorElement.targetElement=t||this._component,this._stateLayerElement.targetElement=t||this._component}setDisabled(t){t?(this._focusIndicatorElement.remove(),this._stateLayerElement.remove()):this._rootElement.append(this._focusIndicatorElement,this._stateLayerElement),this.hasSlottedAnchor?(this._component.removeAttribute("tabindex"),this._component[u]({ariaDisabled:null},{setAttribute:!0})):(t?this._component.removeAttribute("tabindex"):this._component.hasAttribute("tabindex")||this._component.setAttribute("tabindex","0"),this._component[u]({ariaDisabled:t?"true":null}))}clickHost(){HTMLElement.prototype.click.call(this._component)}forceFocusVisible(){this._focusIndicatorElement.active=!0}clickFormButton(t){if(this._component.form)if(t==="submit"){this._component[I].setFormValue(this._component.value);const s=document.createElement("button");s.type=t,H(this._component,s,z),this._component.form.addEventListener("submit",e=>{Object.defineProperty(e,"submitter",{configurable:!0,enumerable:!0,get:()=>this._component})},{capture:!0,once:!0}),this._component.insertAdjacentElement("afterend",s),s.click(),s.remove()}else t==="reset"&&this._component.form?.reset()}hasPopoverTarget(){return this._component.hasAttribute("popovertarget")||!!this._component.popoverTargetElement}managePopover(){if(this._component.form||!this.hasPopoverTarget()||!O())return!1;const t=this._locatePopoverTargetElement();if(!t)return!1;const s=this._component.getAttribute("popovertargetaction")??this._component.popoverTargetAction??"toggle",e=t.matches(":popover-open");switch(s){case"show":return e||t.showPopover(),!0;case"hide":return e&&t.hidePopover(),!1;case"toggle":default:const r=t.togglePopover();if(r&&t.popover!=="manual"){const v=m=>{m.stopPropagation(),t.matches(":popover-open")&&t.hidePopover()};this._component.addEventListener("click",v,{capture:!0,once:!0}),t.addEventListener("beforetoggle",async()=>{await new Promise(m=>setTimeout(m)),this._component.removeEventListener("click",v,{capture:!0})},{once:!0})}return r}}toggleDefaultPopoverIcon(t){if(t){if(!this._endSlotElement.querySelector("forge-icon")){const e=document.createElement("forge-icon");e.classList.add(n.classes.POPOVER_ICON),e.name=L.name,this._endSlotElement.append(e)}}else this._endSlotElement.querySelector("forge-icon")?.remove()}animateStateLayer(){this._stateLayerElement.disabled||!this._stateLayerElement.isConnected||this._stateLayerElement?.playAnimation()}addDefaultSlotChangeListener(t){this._defaultSlotElement.addEventListener("slotchange",t)}_locatePopoverTargetElement(){let t=this._component.popoverTargetElement??null;if(!t){const s=this._component.ownerDocument.getRootNode();if(!s)return null;const e=this._component.getAttribute("popovertarget");t=s.querySelector(`#${e}`)}return t}}export{rt as B,h as I,Q as W,it as a,p as b,n as c};
