import{c as u,_ as a}from"./tslib.es6-CxAMhKEV.js";import{a as m,B as y,b as c,c as b}from"./base-adapter-B4DuGbrf.js";import{c as d}from"./iframe-BQrsiEyh.js";import{A as s,I as h}from"./icon-registry-DH_mpcNN.js";/**
 * @license
 * Copyright Tyler Technologies, Inc. 
 * License: Apache-2.0
 */function v(i,e){const r=document.createElement("div");r.innerHTML=i;for(let o=r.childNodes.length-1;o>=0;o--)r.childNodes[o].nodeName.toLowerCase()!=="svg"&&r.removeChild(r.childNodes[o]);const t=r.firstElementChild;return t?.nodeName.toLowerCase()==="svg"&&f(t)?(e&&t.setAttribute("viewBox",e),!t.hasAttribute("viewBox")&&e&&t.setAttribute("viewBox",e),t.removeAttribute("height"),t.removeAttribute("width"),t):null}function f(i){if(i.nodeType!==1)return!0;if(i.nodeName.toLowerCase()==="script"||i.querySelector("script"))return!1;const e=Array.from(i.attributes);for(const t of e)if(typeof t.name=="string"&&t.name.toLowerCase().startsWith("on"))return!1;const r=Array.from(i.childNodes);for(const t of r)if(!f(t))return!1;return!0}/**
 * @license
 * Copyright Tyler Technologies, Inc. 
 * License: Apache-2.0
 */class g extends m{constructor(e){super(e)}canLazyLoad(){return!!window.IntersectionObserver}observeVisibility(e){this._observer=new IntersectionObserver(r=>{r.some(t=>t.isIntersecting)&&(this.destroyVisibilityObserver(),e())},{rootMargin:`${s.numbers.LAZY_ROOT_MARGIN}px`}),this._observer.observe(this._component)}destroyVisibilityObserver(){this._observer&&(this._observer.disconnect(),this._observer=void 0)}setContent(e){const r=this._component.shadowRoot;r.querySelectorAll(":not(style)").forEach(t=>t.remove()),e&&(this._component.viewbox&&e.setAttribute("viewBox",this._component.viewbox),e.setAttribute("aria-hidden","true"),r.appendChild(e))}setViewBox(e){this._component.shadowRoot?.querySelector("svg")?.setAttribute("viewBox",e)}}/**
 * @license
 * Copyright Tyler Technologies, Inc. 
 * License: Apache-2.0
 */const l=new Map;function _(i,e,r=!0){if(!i||!i.includes("svg"))return null;!e&&!i.includes("viewBox")&&(e=`0 0 ${s.numbers.DEFAULT_WIDTH} ${s.numbers.DEFAULT_HEIGHT}`);const t=v(i,e);return r&&t&&t.setAttribute("part","svg"),t}function x(i){return h.get(i)}function A(i,e){h.awaitIcon(i,e)}function I(i,e){h.removeListener(i,e)}function w(i,e){let r=l.get(i);if(!r)if(typeof fetch<"u"&&typeof document<"u")r=fetch(i).then(async t=>{if(t.ok){const o=await t.text()||"";return h.define({name:e,data:o}),l.delete(i),o}return h.define({name:e,data:""}),""}),l.set(i,r);else return h.define({name:e,data:""}),Promise.resolve("");return r||Promise.resolve("")}function p(i){return["standard","extended","custom","all"].includes(i)?i:"all"}/**
 * @license
 * Copyright Tyler Technologies, Inc. 
 * License: Apache-2.0
 */class T{constructor(e){this._adapter=e,this._lazy=!1,this._external=!1,this._externalType="all",this._lazyListener=this._loadIcon.bind(this)}initialize(){this._applyIcon()}destroy(){this._adapter.destroyVisibilityObserver(),this._clearIconQueue(),this._tryRemoveListener()}_safeApplyIcon(){this._adapter.isConnected&&(this._clearIconQueue(),this._queueIconUpdate())}_tryRemoveListener(){this._registrationListener&&this._name&&I(this._name,this._registrationListener)}_applyIcon(){this._lazy&&this._adapter.canLazyLoad()?this._adapter.observeVisibility(this._lazyListener):this._loadIcon()}_clearIconQueue(){this._applyTimer&&(clearTimeout(this._applyTimer),this._applyTimer=void 0)}_queueIconUpdate(){this._applyTimer=window.setTimeout(()=>{this._applyTimer=void 0,this._applyIcon()})}async _loadIcon(){try{if(this._src){const e=_(this._src,this._viewbox);this._setIconContent(e)}else if(this._name){const e=this._tryGetIcon(this._name);if(e?.node){this._setIconContent(e.node);return}let r=null;if(e)e.raw&&(r=_(e.raw,this._viewbox));else{if(!this._external){this._registrationListener=()=>this._applyIcon(),A(this._name,this._registrationListener),this._adapter.setContent(null);return}this._externalType||(this._externalType="standard");const t=this._getExternalUrl(this._name,this._externalType);if(t){const o=await w(t,this._name);o&&(r=_(o,this._viewbox))}}r&&(e?.node||h.setNode(this._name,r),this._setIconContent(r))}else this._adapter.setContent(null)}catch(e){throw this._adapter.setContent(null),e}}_setIconContent(e){const r=e?e.cloneNode(!0):null;r&&this._adapter.setContent(r)}_tryGetIcon(e){return x(e)}_getExternalUrl(e,r){if(typeof this._externalUrlBuilder=="function")return this._externalUrlBuilder(e,r);const t=p(this._externalType);return["standard","extended","custom"].includes(t)?`${s.strings.DEFAULT_NETWORK_BASE_URL}/${t}/${e}.svg`:`${s.strings.ALL_NETWORK_BASE_URL}/${e}.svg`}get name(){return this._name}set name(e){this._name!==e&&(this._registrationListener&&this._tryRemoveListener(),this._name=(e||"").replace(/\s+/,""),this._safeApplyIcon(),this._adapter.toggleHostAttribute(s.attributes.NAME,!!this._name,this._name))}get src(){return this._src}set src(e){this._src!==e&&(this._src=e,this._adapter.isConnected&&this._applyIcon(),this._adapter.toggleHostAttribute(s.attributes.SRC,!!this._src,this._src))}get lazy(){return this._lazy}set lazy(e){this._lazy!==e&&(this._lazy=e,this._safeApplyIcon(),this._adapter.toggleHostAttribute(s.attributes.LAZY,this._lazy))}get external(){return this._external}set external(e){this._external!==e&&(this._external=e,this._safeApplyIcon(),this._adapter.toggleHostAttribute(s.attributes.EXTERNAL,this._external))}get externalType(){return this._externalType}set externalType(e){e=p(e),this._externalType!==e&&(this._externalType=e,this._safeApplyIcon(),this._adapter.setHostAttribute(s.attributes.EXTERNAL_TYPE,`${this._externalType}`))}get externalUrlBuilder(){return this._externalUrlBuilder}set externalUrlBuilder(e){this._externalUrlBuilder!==e&&(this._externalUrlBuilder=e,this._safeApplyIcon())}get viewbox(){return this._viewbox}set viewbox(e){this._viewbox!==e&&(this._viewbox=e,this._adapter.setViewBox(this._viewbox),this._adapter.setHostAttribute(s.attributes.VIEWBOX,`${this.viewbox}`))}get theme(){return this._theme}set theme(e){this._theme!==e&&(this._theme=e,this._adapter.setHostAttribute(s.attributes.THEME,this._theme))}layout(){this._adapter.isConnected&&this._applyIcon()}}/**
 * @license
 * Copyright Tyler Technologies, Inc. 
 * License: Apache-2.0
 */const E="<template></template>",L=":host{--_icon-color:var(--forge-icon-color, currentColor);--_icon-size:var(--forge-icon-size, 1em);--_icon-width:var(--forge-icon-width, var(--_icon-size));--_icon-height:var(--forge-icon-height, var(--_icon-size));--_icon-font-size:var(--forge-icon-font-size, calc(var(--forge-typography-font-size, 1rem) * 1.5))}:host{display:inline-block;box-sizing:content-box;contain:content;font-size:var(--_icon-font-size)}:host([hidden]){display:none}svg{width:var(--_icon-width);height:var(--_icon-height);display:block;fill:var(--_icon-color);stroke:var(--_icon-color);stroke-width:0}:host([theme=primary]){--_icon-color:var(--forge-icon-color, var(--forge-theme-primary, #3f51b5))}:host([theme=secondary]){--_icon-color:var(--forge-icon-color, var(--forge-theme-secondary, #ffc107))}:host([theme=tertiary]){--_icon-color:var(--forge-icon-color, var(--forge-theme-tertiary, #3d5afe))}:host([theme=success]){--_icon-color:var(--forge-icon-color, var(--forge-theme-success, #2e7d32))}:host([theme=error]){--_icon-color:var(--forge-icon-color, var(--forge-theme-error, #b00020))}:host([theme=warning]){--_icon-color:var(--forge-icon-color, var(--forge-theme-warning, #d14900))}:host([theme=text-medium]){--_icon-color:var(--forge-icon-color, var(--forge-theme-text-medium, rgba(0, 0, 0, 0.6)))}:host([theme=text-low]){--_icon-color:var(--forge-icon-color, var(--forge-theme-text-low, rgba(0, 0, 0, 0.38)))}";let n=class extends y{static get observedAttributes(){return Object.values(s.observedAttributes)}constructor(){super(),u(this,E,L),this._core=new T(new g(this))}connectedCallback(){this._core.initialize()}disconnectedCallback(){this._core.destroy()}attributeChangedCallback(e,r,t){switch(e){case s.observedAttributes.NAME:this.name=t;break;case s.observedAttributes.SRC:this.src=t;break;case s.observedAttributes.LAZY:this.lazy=d(t);break;case s.observedAttributes.EXTERNAL:this.external=d(t);break;case s.observedAttributes.EXTERNAL_TYPE:this.externalType=t;break;case s.observedAttributes.VIEWBOX:this.viewbox=t;break;case s.observedAttributes.THEME:this.theme=t;break}}layout(){this._core.layout()}};a([c()],n.prototype,"name",void 0);a([c()],n.prototype,"src",void 0);a([c()],n.prototype,"lazy",void 0);a([c()],n.prototype,"external",void 0);a([c()],n.prototype,"externalType",void 0);a([c()],n.prototype,"externalUrlBuilder",void 0);a([c()],n.prototype,"viewbox",void 0);a([c()],n.prototype,"theme",void 0);n=a([b({name:s.elementName})],n);export{n as I};
